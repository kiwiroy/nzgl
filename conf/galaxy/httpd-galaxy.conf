<VirtualHost 192.168.30.167:443>
  ServerName nzgl-test.biomatters.com

  RewriteEngine on
  RewriteRule ^/static/style/(.*) /home/galaxy/galaxy-dist/static/june_2007_style/blue/$1 [L]
  RewriteRule ^/static/scripts/(.*) /home/galaxy/galaxy-dist/static/scripts/packed/$1 [L]
  RewriteRule ^/static/(.*) /home/galaxy/galaxy-dist/static/$1 [L]
  RewriteRule ^/favicon.ico /home/galaxy/galaxy-dist/static/favicon.ico [L]
  RewriteRule ^/robots.txt /home/galaxy/galaxy-dist/static/robots.txt [L]
  RewriteRule ^(.*) http://127.0.0.1:8080$1 [P]

  SSLEngine on
  SSLCertificateFile /etc/httpd/conf/nzgl-test.crt
  SSLCertificateKeyFile /etc/httpd/conf/nzgl-test.key
</VirtualHost>

<Location "/">
  AuthType basic
  AuthBasicProvider ldap
  AuthName "Galaxy Server"
#  AuthLDAPURL ldap://rhel6-build.biomatters.com/ou=People,dc=testing,dc=com?uid
  AuthLDAPURL ldaps://ldap.biomatters.com/ou=people,dc=biomatters,dc=com?uid
  AuthzLDAPAuthoritative Off
  Require valid-user
  RequestHeader set REMOTE_USER %{AUTHENTICATE_uid}e

  XSendFile on
  XSendFilePath /

</Location>

# For testing against an LDAP server with TLS self-signed

<IfModule ldap_module>
     LDAPTrustedMode TLS
     LDAPVerifyServerCert Off
</IfModule>


